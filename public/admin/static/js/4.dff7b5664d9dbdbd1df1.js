webpackJsonp([4],{Jonf:function(e,t){},Z0ZY:function(e,t){},sEao:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("Dd8w"),n=o.n(r),i=o("NYxO"),s={props:["info"],computed:n()({},Object(i.d)({menuList:function(e){return e.menu.menuList}})),methods:n()({},Object(i.b)("menu",["getMenuListAction"]),Object(i.b)("role",["getRoleListAction"]),{submitForm:function(){var e=this;this.$refs.roleForm.validate(function(t){if(t){var o=e.formData.id>0?"/roleedit":"/roleadd";e.formData.menus=e.$refs.tree.getCheckedKeys().join(","),e.$http.post(o,e.formData).then(function(t){200===t.code?(e.$success(t.msg),e.getRoleListAction(),e.resetInfo()):e.$error(t.msg)})}})},resetInfo:function(){this.formData={id:0,rolename:"",menus:"",status:""},this.info.isShow=!1,this.$refs.tree.setCheckedKeys([])},setInfo:function(e){var t=this;this.formData=n()({},e),this.$nextTick(function(){t.$refs.tree.setCheckedKeys(t.formData.menus.split(","))})}}),created:function(){this.getMenuListAction()},data:function(){var e=this;return{formData:{id:0,rolename:"",menus:"",status:""},rules:{rolename:{required:!0,message:"请输入角色名称",trigger:"blur"},menus:{validator:function(t,o,r){if(0===e.$refs.tree.getCheckedKeys().length)return r(new Error("请选择菜单权限"));r()},trigger:"blur"},status:{required:!0,message:"请选择状态",trigger:"blur"}},defaultProps:{children:"children",label:"title"}}}},l={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:0===e.formData.id?"新增":"编辑",visible:e.info.isShow},on:{close:e.resetInfo,"update:visible":function(t){return e.$set(e.info,"isShow",t)}}},[o("el-form",{ref:"roleForm",attrs:{"label-width":"100px",model:e.formData,rules:e.rules}},[o("el-form-item",{attrs:{label:"角色名称",prop:"rolename"}},[o("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.formData.rolename,callback:function(t){e.$set(e.formData,"rolename",t)},expression:"formData.rolename"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"角色权限",prop:"menus"}},[o("el-tree",{ref:"tree",attrs:{data:e.menuList,"show-checkbox":"","node-key":"id","default-checked-keys":[],props:e.defaultProps,"default-expand-all":""}})],1),e._v(" "),o("el-form-item",{attrs:{label:"状态",prop:"status"}},[o("el-radio-group",{model:{value:e.formData.status,callback:function(t){e.$set(e.formData,"status",t)},expression:"formData.status"}},[o("el-radio",{attrs:{label:1}},[e._v("正常")]),e._v(" "),o("el-radio",{attrs:{label:2}},[e._v("禁用")])],1)],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.info.isShow=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var a={components:{Dialog:o("VU/8")(s,l,!1,function(e){o("Z0ZY")},null,null).exports},computed:n()({},Object(i.d)({roleList:function(e){return e.role.roleList}})),data:function(){return{info:{isShow:!1}}},methods:n()({},Object(i.b)("role",["getRoleListAction"]),{edit:function(e){this.info.isShow=!0,this.$refs.dialog.setInfo(e)},del:function(e){var t=this;this.$myConfirm(function(){t.$http.post("/roledelete",{id:e}).then(function(e){200===e.code?(t.$success(e.msg),t.getRoleListAction()):t.$error(e.msg)})})}}),created:function(){this.getRoleListAction()}},c={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-card",[o("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.info.isShow=!0}}},[e._v("新增")]),e._v(" "),o("el-divider"),e._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roleList}},[o("el-table-column",{attrs:{prop:"id",label:"ID","min-width":"80"}}),e._v(" "),o("el-table-column",{attrs:{prop:"rolename",label:"角色名称","min-width":"180"}}),e._v(" "),o("el-table-column",{attrs:{prop:"status",label:"状态","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.status?o("el-tag",{attrs:{type:"success"}},[e._v("正常")]):o("el-tag",{attrs:{type:"danger"}},[e._v("禁用")])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"操作","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"success",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(o){return e.edit(t.row)}}}),e._v(" "),o("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(o){return e.del(t.row.id)}}})]}}])})],1),e._v(" "),o("Dialog",{ref:"dialog",attrs:{info:e.info}})],1)},staticRenderFns:[]};var u=o("VU/8")(a,c,!1,function(e){o("Jonf")},null,null);t.default=u.exports}});
//# sourceMappingURL=4.dff7b5664d9dbdbd1df1.js.map