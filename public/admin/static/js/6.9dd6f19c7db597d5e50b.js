webpackJsonp([6],{"2pHr":function(t,e){},S1gR:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Xxa5"),n=a.n(i),r=a("exGp"),o=a.n(r),s=a("Dd8w"),l=a.n(s),c=a("NYxO"),u={props:["info"],computed:l()({},Object(c.d)({cateList:function(t){return t.category.cateList}})),data:function(){return{fileList:[],cateData:{id:0,pid:0,catename:"",img:"",status:""},rules:{pid:{required:!0,message:"请选择上级分类",trigger:"blur"},catename:{required:!0,message:"请填写分类名称",trigger:"blur"},status:{required:!0,message:"请选择分类状态",trigger:"blur"}},dialogImageUrl:"",dialogVisible:!1}},methods:l()({},Object(c.b)("category",["getCateListActoin"]),{handleRemove:function(t,e){},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},fileChange:function(t){this.cateData.img=t.raw},limitTips:function(){this.$error("最多只能上传一张图片")},submitForm:function(){var t=this;this.$refs.cateForm.validate(function(e){if(e){var a=new FormData;for(var i in t.cateData)a.append(i,t.cateData[i]);var n=t.cateData.id>0?"/cateedit":"/cateadd";t.$http.post(n,a).then(function(e){200===e.code?(t.$success(e.msg),t.getCateListActoin(),t.info.isShow=!1,t.resetInfo()):t.$error(e.msg)})}})},setInfo:function(t){this.cateData=l()({},t),this.fileList=""!==t.img?[{url:this.$imgBaseUrl+t.img}]:[]},resetInfo:function(){this.cateData={id:"",pid:0,catename:"",img:"",status:""},this.fileList=[]}})},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.cateData.id>0?"编辑":"添加",visible:t.info.isShow},on:{close:t.resetInfo,"update:visible":function(e){return t.$set(t.info,"isShow",e)}}},[a("el-form",{ref:"cateForm",attrs:{model:t.cateData,rules:t.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"上级分类",prop:"pid"}},[a("el-select",{attrs:{placeholder:"请选择上级分类"},model:{value:t.cateData.pid,callback:function(e){t.$set(t.cateData,"pid",e)},expression:"cateData.pid"}},[a("el-option",{attrs:{label:"顶级分类",value:0}}),t._v(" "),t._l(t.cateList,function(t){return a("el-option",{key:t.id,attrs:{label:t.catename,value:t.id}})})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"分类名称",prop:"catename"}},[a("el-input",{attrs:{placeholder:"请输入分类名称"},model:{value:t.cateData.catename,callback:function(e){t.$set(t.cateData,"catename",e)},expression:"cateData.catename"}})],1),t._v(" "),0!==t.cateData.pid?a("el-form-item",{attrs:{label:"分类图片",prop:"img"}},[a("el-upload",{attrs:{action:"#","list-type":"picture-card","on-remove":t.handleRemove,"auto-upload":!1,"on-change":t.fileChange,"file-list":t.fileList,limit:1,"on-exceed":t.limitTips}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"分类状态",prop:"status"}},[a("el-radio-group",{model:{value:t.cateData.status,callback:function(e){t.$set(t.cateData,"status",e)},expression:"cateData.status"}},[a("el-radio",{attrs:{label:1}},[t._v("正常")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("禁用")])],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.info.isShow=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")])],1)],1)},staticRenderFns:[]};var f={components:{Dialog:a("VU/8")(u,d,!1,function(t){a("2pHr")},null,null).exports},data:function(){return{info:{isShow:!1}}},computed:l()({},Object(c.d)({cateList:function(t){return t.category.cateList}})),methods:l()({},Object(c.b)("category",["getCateListActoin"]),{edit:function(t){this.$refs.dialog.setInfo(t),this.info.isShow=!0},del:function(t){var e=this;this.$myConfirm(o()(n.a.mark(function a(){var i;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$http.post("/catedelete",{id:t});case 2:if(200!==(i=a.sent).code){a.next=6;break}return e.$success(i.msg),a.abrupt("return",e.getCateListActoin());case 6:e.$error(i.msg);case 7:case"end":return a.stop()}},a,e)})))}}),created:function(){this.getCateListActoin()}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(e){t.info.isShow=!0}}},[t._v("新增")]),t._v(" "),a("el-divider"),t._v(" "),a("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:t.cateList,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{prop:"id",label:"ID","min-width":"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"img",label:"分类图片","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[""!==e.row.img?a("img",{staticStyle:{height:"80px"},attrs:{src:t.$imgBaseUrl+e.row.img,alt:""}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"catename",label:"分类名称","min-width":"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态","min-width":"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?a("el-tag",{attrs:{type:"success"}},[t._v("正常")]):a("el-tag",{attrs:{type:"danger"}},[t._v("禁用")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"success",circle:"",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return t.edit(e.row)}}}),t._v(" "),a("el-button",{attrs:{type:"danger",circle:"",size:"mini",icon:"el-icon-delete"},on:{click:function(a){return t.del(e.row.id)}}})]}}])})],1),t._v(" "),a("Dialog",{ref:"dialog",attrs:{info:t.info}})],1)},staticRenderFns:[]};var p=a("VU/8")(f,m,!1,function(t){a("i5vO")},null,null);e.default=p.exports},i5vO:function(t,e){}});
//# sourceMappingURL=6.9dd6f19c7db597d5e50b.js.map